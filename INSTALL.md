# 安裝指南

## 系統需求

在安裝本外掛前,請確保您的系統符合以下需求:

### 必要需求
- **WordPress**: 6.0 或更高版本
- **WooCommerce**: 8.0 或更高版本
- **PHP**: 8.0 或更高版本
- **WooCommerce 區塊結帳**: 必須啟用

### 開發環境需求(僅限開發者)
- **Node.js**: 16.0 或更高版本
- **npm**: 8.0 或更高版本

## 安裝方式

### 方式一: WordPress 後台安裝(推薦)

1. **下載外掛**
   - 從 GitHub Releases 或官方網站下載最新版本的 ZIP 檔案

2. **上傳並安裝**
   - 登入 WordPress 管理後台
   - 前往 **外掛 > 安裝外掛**
   - 點擊頁面頂端的 **上傳外掛** 按鈕
   - 選擇下載的 ZIP 檔案
   - 點擊 **立即安裝**

3. **啟用外掛**
   - 安裝完成後,點擊 **啟用外掛**
   - 或前往 **外掛 > 已安裝的外掛**,找到本外掛並啟用

### 方式二: FTP 手動安裝

1. **解壓縮檔案**
   - 將下載的 ZIP 檔案解壓縮

2. **上傳檔案**
   - 使用 FTP 客戶端(如 FileZilla)連接您的網站
   - 將解壓縮後的 `ja-tw-city-select` 資料夾上傳到 `/wp-content/plugins/` 目錄

3. **啟用外掛**
   - 登入 WordPress 管理後台
   - 前往 **外掛 > 已安裝的外掛**
   - 找到「台灣 WooCommerce 區塊結帳欄位地址選單」並點擊 **啟用**

### 方式三: WP-CLI 安裝(進階)

如果您熟悉 WP-CLI,可以使用以下指令:

```bash
# 安裝外掛
wp plugin install ja-tw-city-select.zip

# 啟用外掛
wp plugin activate ja-tw-city-select
```

## 驗證安裝

安裝並啟用後,請驗證外掛是否正常運作:

1. **檢查外掛狀態**
   - 前往 **外掛 > 已安裝的外掛**
   - 確認「台灣 WooCommerce 區塊結帳欄位地址選單」顯示為「已啟用」

2. **測試結帳頁面**
   - 前往您的 WooCommerce 結帳頁面
   - 確保頁面使用的是「結帳區塊」而非簡碼
   - 將國家/地區設定為「台灣」
   - 確認縣市和鄉鎮市區欄位顯示為下拉選單

3. **測試功能**
   - 選擇一個縣市
   - 確認鄉鎮市區選單自動更新
   - 選擇一個鄉鎮市區
   - 確認郵遞區號自動填入(可透過瀏覽器開發者工具檢查隱藏欄位)

## 設定區塊結帳

如果您的結帳頁面仍使用傳統簡碼,請依照以下步驟轉換為區塊結帳:

1. **建立新的結帳頁面**
   - 前往 **頁面 > 新增頁面**
   - 輸入標題「結帳」

2. **插入結帳區塊**
   - 點擊 「+」按鈕新增區塊
   - 搜尋「結帳」
   - 選擇 **WooCommerce 結帳區塊**

3. **設定 WooCommerce**
   - 前往 **WooCommerce > 設定 > 進階 > 頁面設定**
   - 將「結帳頁面」設定為剛建立的新頁面
   - 儲存變更

## 開發者安裝

如果您想要進行開發或自訂:

1. **複製儲存庫**
   ```bash
   cd wp-content/plugins/
   git clone https://github.com/yourusername/ja-tw-city-select.git
   cd ja-tw-city-select
   ```

2. **安裝相依套件**
   ```bash
   npm install
   ```

3. **開發模式**
   ```bash
   # 啟動開發伺服器(含熱重載)
   npm run start
   ```

4. **建置生產版本**
   ```bash
   npm run build
   ```

5. **啟用外掛**
   ```bash
   wp plugin activate ja-tw-city-select
   ```

## 故障排除

### 外掛無法啟用

**問題**: 啟用外掛時出現錯誤訊息

**解決方案**:
- 確認 PHP 版本至少為 8.0
- 確認 WordPress 版本至少為 6.0
- 確認已安裝並啟用 WooCommerce 8.0+

### 地址欄位未轉換為下拉選單

**問題**: 結帳頁面的地址欄位仍顯示為文字輸入

**解決方案**:
- 確認結帳頁面使用的是「區塊結帳」而非 `[woocommerce_checkout]` 簡碼
- 確認國家/地區已設定為「台灣」
- 清除快取(如有使用快取外掛)
- 檢查瀏覽器主控台是否有 JavaScript 錯誤

### JavaScript 檔案未載入

**問題**: 瀏覽器主控台顯示檔案載入錯誤

**解決方案**:
- 確認 `assets/js/checkout-block.js` 檔案存在
- 確認檔案權限正確(644)
- 執行 `npm run build` 重新建置檔案
- 清除瀏覽器快取

## 解除安裝

如需移除外掛:

1. **停用外掛**
   - 前往 **外掛 > 已安裝的外掛**
   - 找到本外掛並點擊 **停用**

2. **刪除外掛**
   - 停用後,點擊 **刪除**
   - 確認刪除操作

**注意**: 刪除外掛不會影響您的訂單資料或客戶地址資料。

## 取得協助

如果您在安裝過程中遇到問題:

- 檢視 [README.md](README.md) 中的常見問題
- 查看 [GitHub Issues](https://github.com/yourusername/ja-tw-city-select/issues)
- 聯繫技術支援: [您的 Email]

---

**提示**: 安裝後建議在測試環境中先測試功能,確認無誤後再套用到正式環境。

